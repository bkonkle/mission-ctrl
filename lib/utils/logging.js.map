{"version":3,"sources":["../../src/utils/logging.js"],"names":[],"mappings":";;;;kBA2CwB;;;;;;;;;;;;;;;;;;AAtCxB,IAAM,SAAS,uBAAT;;AAEN,IAAI,WAAW,MAAX;AACJ,IAAI,OAAO,OAAP,EAAgB;AAClB,aAAW,OAAX,CADkB;CAApB,MAEO,IAAI,OAAO,KAAP,EAAc;AACvB,aAAW,SAAX,CADuB;CAAlB,MAEA,IAAI,OAAO,MAAP,EAAe;AACxB,aAAW,OAAX,CADwB;CAAnB;;IAIM;;;;;wBACX,uBAAM,KAAK;AACT,QAAI,SAAS,IAAI,GAAJ,CADJ;;AAGT,QAAI,IAAI,KAAJ,GAAY,iBAAO,IAAP,EAAa;AAC3B,cAAQ,GAAR,CAAY,MAAZ,EAD2B;KAA7B,MAEO,IAAI,IAAI,KAAJ,GAAY,iBAAO,IAAP,EAAa;AAClC,cAAQ,IAAR,CAAa,MAAb,EADkC;KAA7B,MAEA,IAAI,IAAI,KAAJ,GAAY,iBAAO,KAAP,EAAc;AACnC,cAAQ,IAAR,CAAa,MAAb,EADmC;KAA9B,MAEA;AACL,UAAI,OAAO,MAAP,KAAkB,QAAlB,EAA4B;AAC9B,iBAAS,gBAAM,GAAN,CAAU,MAAV,CAAT,CAD8B;OAAhC;AAGA,cAAQ,KAAR,CAAc,MAAd,EAJK;KAFA;;;SARE;;;;;;;;;;;;AA2BE,SAAS,YAAT,CAAsB,IAAtB,EAA4B,KAA5B,EAAmC;AAChD,MAAM,WAAW;AACf,cADe;AAEf,aAAS,CACP;AACE,aAAO,SAAS,QAAT;AACP,YAAM,KAAN;AACA,cAAQ,IAAI,WAAJ,EAAR;KAJK,CAAT;GAFI,CAD0C;;AAYhD,SAAO,iBAAO,YAAP,CAAoB,QAApB,CAAP,CAZgD;CAAnC","file":"logging.js","sourcesContent":["/* eslint no-console:0 */\nimport bunyan from 'bunyan'\nimport chalk from 'chalk'\nimport getConfig from './config'\n\nconst config = getConfig()\n\nlet loglevel = 'info'\nif (config.verbose) {\n  loglevel = 'debug'\n} else if (config.quiet) {\n  loglevel = 'warning'\n} else if (config.silent) {\n  loglevel = 'error'\n}\n\nexport class PlainStream {\n  write(rec) {\n    let record = rec.msg\n\n    if (rec.level < bunyan.INFO) {\n      console.log(record)\n    } else if (rec.level < bunyan.WARN) {\n      console.info(record)\n    } else if (rec.level < bunyan.ERROR) {\n      console.warn(record)\n    } else {\n      if (typeof record === 'string') {\n        record = chalk.red(record)\n      }\n      console.error(record)\n    }\n  }\n}\n\n/**\n * Create a logger with the given name.\n *\n * @param {String} name - the name for the logger (usually the module being\n *                        logged in)\n * @param {Number} [level] - an optional override for the loglevel\n * @return {Object} - the bunyan logger object\n */\nexport default function createLogger(name, level) {\n  const settings = {\n    name,\n    streams: [\n      {\n        level: level || loglevel,\n        type: 'raw',\n        stream: new PlainStream(),\n      },\n    ],\n  }\n\n  return bunyan.createLogger(settings)\n}\n"]}