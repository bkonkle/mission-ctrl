{"version":3,"sources":["../../../src/workers/linter/index.js"],"names":[],"mappings":";;;QASgB;QAIA;QAkBA;;;;;;;;;;;;;;;;;;;;AAxBhB,IAAM,MAAM,uBAAa,gBAAb,CAAN;;AAEC,SAAS,IAAT,GAAgB,EAAhB;;AAIA,SAAS,IAAT,CAAc,KAAd,EAAqB;AAC1B,MAAI,KAAJ,CAAU,qBAAV,EAD0B;;AAG1B,MAAM,SAAS,uBAAT,CAHoB;;AAK1B,UAAQ,IAAR,CAAa,gDAAb,EAL0B;AAM1B,QAAM,QAAN,CAAe,uBAAW,IAAX,CAAf,EAN0B;;AAQ1B,MAAM,SAAS,uBAAT,CARoB;AAS1B,MAAM,SAAS,OAAO,cAAP,CAAsB,CAAC,OAAO,MAAP,CAAvB,CAAT,CAToB;AAU1B,UAAQ,GAAR,CAAY,4BAAZ,EAA0C,MAA1C,EAV0B;;AAY1B,MAAI,KAAJ,CAAU,oBAAV,EAZ0B;;AAc1B,QAAM,QAAN,CAAe,uBAAW,KAAX,CAAf,EAd0B;AAe1B,UAAQ,IAAR,CAAa,iDAAb,EAf0B;CAArB;;AAkBA,SAAS,YAAT,CAAsB,KAAtB,EAA6B;AAClC,MAAI,KAAJ,CAAU,eAAV,EADkC;;AAGlC,MAAM,QAAQ,MAAM,QAAN,EAAR,CAH4B;;AAKlC,UAAQ,MAAM,MAAN,CAAa,GAAb,CAAiB,MAAjB,CAAR;AACE;AACE,UAAI,CAAC,MAAM,MAAN,CAAa,GAAb,CAAiB,YAAjB,CAAD,EAAiC;AACnC,aAAK,KAAL,EADmC;OAArC;AAGA,YAJF;AADF;;GALkC;CAA7B","file":"index.js","sourcesContent":["import {CLIEngine} from 'eslint'\nimport {GOAL_LINT} from 'state/foreman'\nimport {inProgress} from 'workers/linter/state'\nimport {workerReady, workerBusy, WORKER_LINTER} from 'state/workers'\nimport createLogger from 'utils/logging'\nimport getConfig from 'utils/config'\n\nconst log = createLogger('workers/linter')\n\nexport function init() {\n\n}\n\nexport function lint(store) {\n  log.debug('Beginning transpile')\n\n  const config = getConfig()\n\n  process.send(workerBusy(WORKER_LINTER))\n  store.dispatch(inProgress(true))\n\n  const linter = new CLIEngine()\n  const report = linter.executeOnFiles([config.source])\n  console.log('report ------------------>', report)\n\n  log.debug('Transpile complete')\n\n  store.dispatch(inProgress(false))\n  process.send(workerReady(WORKER_LINTER))\n}\n\nexport function stateChanged(store) {\n  log.debug('State changed')\n\n  const state = store.getState()\n\n  switch (state.linter.get('goal')) {\n    case GOAL_LINT:\n      if (!state.linter.get('inProgress')) {\n        lint(store)\n      }\n      break\n    default:\n      // Do nothing\n  }\n}\n"]}